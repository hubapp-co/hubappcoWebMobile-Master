<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Hubapp - Posts</title>
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta charset="utf-8">
        <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
         <!-- Favicons -->
        <link rel="shortcut icon" th:href="@{../images/favicon.png}"> 

        <!-- CSS -->
        <link rel="stylesheet"  th:href="@{../css/bootstrap.min.css}">
        <link rel="stylesheet" th:href="@{../css/style.css}">
        <link rel="stylesheet" th:href="@{../css/style-responsive.css}">
        <link rel="stylesheet" th:href="@{../css/animate.min.css}">
        <link rel="stylesheet" th:href="@{../css/vertical-rhythm.min.css}">
        <link rel="stylesheet" th:href="@{../css/owl.carousel.css}">
        <link rel="stylesheet" th:href="@{../css/magnific-popup.css}">        
        
    </head>
    <body class="appear-animate">
        
        <!-- Page Loader -->        
        <div class="page-loader">
            <div class="loader">Loading...</div>
        </div>
        <!-- End Page Loader -->
        
        <!-- Page Wrap -->
        <div class="page" id="top">
            <!-- <span sec:authentication="principal.username" class="page" id="top">User</span> -->
            <!-- Navigation panel -->
              <th:block th:replace="fragments/header_ui :: header"/>
            <!-- End Navigation panel -->
            
            
           <section class="small-section bg-dark-lighter">
                <div class="container relative">
                   <!-- Post Form -->                            
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2">
                             <h1 class="hs-line-11 font-alt mb-20 mb-xs-0">Post It Here!!!!</h1>
                             
                            <form action="#" th:action="@{/user/postweb}" th:object="${postReq}" method="POST" enctype="multipart/form-data" class="form contact-form" id="contact_form">
                                <div class="clearfix">
                                    <input type="hidden" name="docId" id="docId" value="1" class="input-md round form-control" placeholder="Name" pattern=".{3,100}" >
                                    <input type="hidden" name="categoryFinalChildId" id="categoryFinalChildId" value="1" class="input-md round form-control" placeholder="Name" pattern=".{3,100}" >
                                    <div class="cf-left-col">
                                        <input type="hidden" name="postUserId" id="postUserId" value="1" class="input-md round form-control" placeholder="Name" pattern=".{3,100}">
                                        Name
                                        <div class="form-group">
                                            <input type="text" name="postTitle" id="postTitle" class="input-md round form-control" placeholder="Name" pattern=".{3,100}" required>
                                        </div>
                                         Message
                                        <div class="form-group">                                            
                                            <textarea name="postDescription" id="postDescription" class="input-md round form-control" style="height: 84px;" placeholder="Description"></textarea>
                                        </div>
                                        <div class="mb-20 mb-md-10">
                                    <label for="exampleInputFile">
                                        Image
                                    </label>
                                    <input type="file" id="postImageFile" name="postImageFile">
                                    <p class="help-block">
                                        Upload an Image...
                                    </p>
                                </div>
                                        
                                    </div>
                                    
                                    <div class="cf-right-col">
                                        
                                       
                                         <div class="mb-20 mb-md-10">
                                    <select id="categoryId" name="categoryId" class="input-md form-control">
                                            <option value="">Select Category</option>
              								<option th:each="category : ${categories}"
             									       th:value="${category.id}"
              									       th:text="${category.categoryName}"></option>
   									</select>
                                </div>
                                 <div class="mb-20 mb-md-10">
                                    <select id="categoryChildId" name="categoryChildId" class="input-md form-control">
                                        <option value="">Select Child Category </option>
                                    </select>
                                </div>
                                 <div class="mb-20 mb-md-10">
                                    <select id="categorySubChildId" name="categorySubChildId" class="input-md form-control">
                                       <option value="">Select Child Sub Category </option>
                                    </select>
                                </div>
                                    </div>
                                    
                                </div>
                                
                                <div class="clearfix">
                                    
                                    <div class="cf-left-col">
                                        
                                       <!--  Inform Tip -->                                        
                                        <div class="form-tip pt-20">
                                            <i class="fa fa-info-circle"></i> All the fields are required
                                        </div>
                                        
                                    </div>
                                    
                                    <div class="cf-right-col">
                                        
                                        <!-- Send Button -->
                                        <div class="align-right pt-10">
                                        <button type="submit" class="submit_btn btn btn-mod btn-medium btn-round" id="login-btn">Save Post</button>
                                            <!-- <button type="submit" class="submit_btn btn btn-mod btn-medium btn-round" id="submit_btn">Save Post</button> -->
                                        </div>
                                        
                                    </div>
                                    
                                </div>
                                
                                
                                
                                <div id="result"></div>
                            </form> 
                            
                        </div>
                    </div>
                    <!-- End Contact Form -->
                    
                </div>
            </section>
            
            
            
            
            <!-- Foter -->
            <th:block th:replace="fragments/footer_user :: footer"/>
            <!-- End Foter -->
            
            
            <!-- Buy Button -->
          <!--   <a href="https://themeforest.net/item/rhythm-multipurpose-onemulti-page-template/10140354" target="_blank" class="buy-button"><i class="fa fa-shopping-cart" aria-hidden="true"></i> <span>Buy</span></a> -->
            <!-- End Buy Button -->
        
        
        </div>
        <!-- End Page Wrap -->
        
        
       <!-- JS -->
        <script type="text/javascript" th:src="@{../js/jquery-1.11.2.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.easing.1.3.js}"></script>
        <script type="text/javascript" th:src="@{../js/bootstrap.min.js}"></script>        
        <script type="text/javascript" th:src="@{../js/SmoothScroll.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.scrollTo.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.localScroll.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.viewport.mini.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.countTo.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.appear.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.sticky.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.parallax-1.1.3.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.fitvids.js}"></script>
        <script type="text/javascript" th:src="@{../js/owl.carousel.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/isotope.pkgd.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/imagesloaded.pkgd.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.magnific-popup.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/wow.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/masonry.pkgd.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.simple-text-rotator.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.lazyload.min.js}"></script>
        <script type="text/javascript" th:src="@{../js/all.js}"></script>
        <script type="text/javascript" th:src="@{../js/contact-form.js}"></script>
        <script type="text/javascript" th:src="@{../js/jquery.ajaxchimp.min.js}"></script>        
       <!--[if lt IE 10]><script type="text/javascript" src="js/placeholder.js"></script><![endif]--> 
       
          <!-- Script for dynamic drop down -->
        <script th:inline="javascript">
 $(document).ready(function(){
	 
	/*  $("#contact_form").submit(function(event){
			alert("form submit jquery");
			        // get the form data
			        // there are many ways to get this data using jQuery (you can use the class or id also)
			        var formData = {
			            'postTitle'              : $('input[name=postTitle]').val(),
			            'postDescription'             : $('input[name=postDescription]').val(),
			            'postImage'    : $('input[name=postImage]').val(),
			            'categoryId'    : $('input[name=categoryId]').val(),
			            'categoryChildId'    : $('input[name=categoryChildId]').val(),
			            'categorySubChildId'    : $('input[name=categorySubChildId]').val(),
			            'categoryFinalChildId' :$('input[name=categoryFinalChildId]').val,
			            'postUserId' :$('input[name=postUserId]').val,
			            'docId' :$('input[name=docId]').val
			        };
			        console.log(formData); 
					var uriPost = window.location +"postrestweb";
			        // process the form
			        $.ajax({
			            type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
			            url         : uriPost, // the url where we want to POST
			            data        : formData, // our data object
			            dataType    : 'json', // what type of data do we expect back from the server
			                        encode          : true
			        })
			            // using the done promise callback
			            .done(function(data) {

			                // log data to the console so we can see
			                console.log(data); 

			                // here we will handle errors and validation messages
			            });

			        // stop the form from submitting the normal way and refreshing the page
			        event.preventDefault();
			    }); */

	// var localhost ="localhost";
	 var localhost ="hubapp.co.in";
	 
	$('#categoryId').on('change', function(){
		
		var id = $(this).val();
		//var urichild = window.location+"childCategory/" + id;
		var urichild ="http://"+localhost+":8080/user/childCategory/" + id;
		console.log("URLLLLLLLLLLLLLL"+urichild);
		$.ajax({
			type: "GET",
			url:urichild ,
			success: function(result) {
				console.log(result);
				if(result != null){
					//console.log(result);
				var s = '<option>Select Child Category</option>';
				for(var i = 0; i < result.length; i++) {
					s += '<option value="' + result[i].id + '">' + result[i].categoryChildName + '</option>';
				}
				//console.log("test");
				$('#categoryChildId').html(s);
			}else{
				console.log("result data empty");
			}
			}
		
		}); 
	});



	$('#categoryChildId').on('change', function(){
		var id = $(this).val();
		var uriSubChild = "http://"+localhost+":8080/user/childSubCategory/" + id;
		//console.log(uriSubChild);
		$.ajax({
			type: "GET",
			url:uriSubChild ,
			success: function(result) {
				//var result = JSON.parse(result);
				var s = '<option>Select Child Sub Category</option>';
				for(var i = 0; i < result.length; i++) {
					s += '<option value="' + result[i].id + '">' + result[i].categorySubChildName + '</option>';
				}
				$('#categorySubChildId').html(s);
			}
		});
	});
	/* $('#userId_name').on('load', function(){
	
	}); */

}); 
 
 jQuery(document).ready(function($){
	 
		var username = $('#userId_name').text();
		var uriUserName = "http://"+localhost+":8080/user/userId_name/"+ username;
		//console.log(uriUserName);
		$.ajax({
			type: "GET",
			url:uriUserName,
			success: function(result) {
				//var result = JSON.parse(result);
				//console.log(result);
				var s = '';
					s +=result[i].id;
					//console.log(s);
				$('#postUserId').html(s);
			}
		});
	 
 });
 
 

</script>
       
    </body>
</html>
